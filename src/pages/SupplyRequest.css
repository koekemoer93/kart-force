:root { --border:#2a2d31; --muted:#a4a6ab; --glass:#15171a; }

.tiny{ font-size:12px; } /* ensure consistent tiny text on this page */

.srq-wrap{
  max-width: 1100px;
  margin: 0 auto;
  /* room so sticky footer never overlaps content */
  padding: 10px;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 72px);
  display: grid;
  gap: 10px;
}

.card{
  background:#17181a;
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
}
.card-h{ font-weight:700; margin-bottom:8px; }

/* Sticky search + chips (respect top safe area + nav height) */
.srq-toolbar{
  position: sticky;
  top: calc(env(safe-area-inset-top, 0px) + var(--nav-h,56px) + 6px);
  z-index: 3;
  background: var(--glass);
}
.srq-head{ display:flex; flex-direction:column; gap:4px; margin-bottom:6px; }
.srq-title{ margin:0; }
.srq-search{ width:100%; margin:0; }
.srq-chips{
  display:flex; gap:6px; margin-top:6px; overflow-x:auto; padding-bottom:2px;
  scrollbar-width: none;
}
.srq-chips::-webkit-scrollbar{ display:none; }

.input{
  background:#111216; border:1px solid var(--border);
  border-radius:10px; padding:9px 10px; color:#fff; width:100%;
}
.chip{
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.10);
  color:#e7e7e7;
  border-radius: 999px;
  padding: 6px 12px;
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
}
.chip.is-active{
  color:#24ff98;
  border-color:#24ff98;
  background: rgba(36,255,152,0.06);
}
.chip.ghost{ background:#171a1f; color:#cfd1d6; }

/* List */
.srq-item{
  display:grid;
  /* Reserve space for the stepper so it never collapses */
  grid-template-columns: 1fr minmax(232px, 360px);
  gap:8px;
  align-items:center;
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  background:#101216;
}
.srq-item-main{ min-width:0; }
.srq-item-title{ font-weight:700; margin-bottom:2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.srq-stepper{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
  flex-wrap:nowrap;
  min-width:232px;         /* matches grid min */
}
.srq-qty{
  flex:0 1 120px;          /* grows a bit if room, but keeps one line */
  max-width:140px;
  width:100%;
  text-align:center;
  min-width:0;             /* allow shrink in flex */
}
.step{
  width:40px; height:40px;
  border-radius:10px; font-weight:800;
  border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.06);
  cursor:pointer; color:#fff;
}
.step:disabled{ opacity:0.5; cursor:not-allowed; }

.srq-selected{ display:grid; gap:6px; }
.srq-selected-row{
  display:flex; justify-content:space-between; align-items:center;
  border:1px solid rgba(255,255,255,0.08);
  background:rgba(255,255,255,0.03);
  padding:6px 10px; border-radius:10px;
}
.srq-selected-name{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.srq-note{ display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:start; }
.srq-photo{ display:grid; gap:6px; width:160px; }
.srq-preview{
  width: 160px; height: 110px; object-fit: cover;
  border-radius:10px; border:1px solid rgba(255,255,255,0.1);
}

.srq-actions{ display:flex; justify-content:space-between; gap:8px; margin-top:10px; }
.btn{
  padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:#191b20; color:#e7e8ea; cursor:pointer;
}
.btn.primary{ background:#1c3a31; color:#c0f3e7; border-color:#2b564a; }
.btn.ghost{ background:#121419; color:#c9cace; }
.btn:disabled{ opacity:0.6; cursor:not-allowed; }

/* Sticky footer mini-summary (respect bottom safe area) */
.srq-footer{
  position: sticky;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 8px);
  z-index: 3;
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  background: rgba(16,18,22,0.92); backdrop-filter: blur(6px);
  border:1px solid var(--border); border-radius:12px; padding:8px 10px;
}
.srq-footer-left{ display:flex; align-items:center; gap:8px; }
.footer-count{
  min-width:28px; text-align:center; border:1px solid var(--border);
  border-radius:999px; padding:2px 8px; background:#1a2226;
}
.footer-btn{ min-width:120px; }

@media (max-width: 720px){
  .srq-item{ grid-template-columns: 1fr; }

  /* Make the stepper full-width grid: [-] [Qty] [+] always on ONE line */
  .srq-stepper{
    display:grid !important;                     /* override flex */
    grid-template-columns: 46px 1fr 46px;
    align-items:center;
    gap:8px;
    min-width:0;
  }
  .srq-qty{
    width:auto; max-width:none; min-width:0; text-align:center;
  }
  .step{ width:46px; height:46px; }

  /* "Remove" chip drops below neatly */
  .srq-stepper .chip{
    grid-column: 1 / -1;
    justify-self: end;
  }

  /* Details form stacks */
  .srq-note{ grid-template-columns: 1fr; }
  .srq-photo{ width:100%; }
  .srq-preview{ width:100%; height:160px; }
}

@media (min-width: 721px) and (max-width: 980px){
  .srq-item{
    grid-template-columns: 1fr minmax(220px, 320px);
  }
  .srq-stepper{ min-width:220px; }
}
